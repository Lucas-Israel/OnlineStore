{"ast":null,"code":"import _classCallCheck from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Link}from'react-router-dom';import Header from'../components/Header';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ShoppingCart=/*#__PURE__*/function(_Component){_inherits(ShoppingCart,_Component);var _super=_createSuper(ShoppingCart);function ShoppingCart(){var _this;_classCallCheck(this,ShoppingCart);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={cart:!JSON.parse(localStorage.getItem('cart'))?[]:JSON.parse(localStorage.getItem('cart'))};_this.componentDidUpdate=function(){var cart=_this.state.cart;localStorage.setItem('cart',JSON.stringify(cart));};_this.increaseProductQuantity=function(idProduct,operation){var cart=_this.state.cart;var index=cart.indexOf(cart.find(function(_ref){var id=_ref.id;return id===idProduct;}));if(operation==='increase'&&cart[index].orderQuantity<cart[index].available_quantity){cart[index].orderQuantity+=1;var cartUpdate=cart;return _this.setState({cart:cartUpdate});}if(operation==='decrease'&&cart[index].orderQuantity>1){cart[index].orderQuantity-=1;var _cartUpdate=cart;return _this.setState({cart:_cartUpdate});}};_this.removeProduct=function(id){var cart=_this.state.cart;var cartUpdate=cart.filter(function(item){return item.id!==id;});_this.setState({cart:cartUpdate});};return _this;}_createClass(ShoppingCart,[{key:\"render\",value:function render(){var _this2=this;var cart=this.state.cart;var totalPrice=cart.length>0&&cart.map(function(_ref2){var price=_ref2.price,orderQuantity=_ref2.orderQuantity;return price*orderQuantity;}).reduce(function(a,b){return a+b;},0);var currency=new Intl.NumberFormat('en-US',{style:'currency',currency:'BRL'});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{cart:cart,categories:false}),/*#__PURE__*/_jsx(\"section\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center text-center mt-3\",children:[cart.length>0?cart.map(function(_ref3){var thumbnail=_ref3.thumbnail,title=_ref3.title,price=_ref3.price,orderQuantity=_ref3.orderQuantity,id=_ref3.id;return/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center align-items-center my-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-8 col-lg-2 mb-3\",children:/*#__PURE__*/_jsx(\"img\",{src:thumbnail.replace(/I.jpg/g,'W.jpg'),alt:title,className:\"img-fluid mx-auto d-block\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-lg-6 text-start mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"shopping-cart-product-name\",className:\"row fs-5\",children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"row my-3\",children:\"R$ \".concat(price.toFixed(2))}),/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center justify-content-center\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary btn-sm d-none d-lg-block col-4 col-lg-1\",onClick:function onClick(){return _this2.increaseProductQuantity(id,'decrease');},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-minus fa-lg\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"product-decrease-quantity\",className:\"btn btn-secondary btn-lg d-lg-none col-4 col-lg-1\",onClick:function onClick(){return _this2.increaseProductQuantity(id,'decrease');},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-minus fa-lg\"})}),/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"shopping-cart-product-quantity\",className:\"col-3 col-lg-1 text-center fs-4 mx-2\",children:orderQuantity}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-success btn-sm d-none d-lg-block col-4 col-lg-1\",onClick:function onClick(){return _this2.increaseProductQuantity(id,'increase');},disabled:_this2.increaseButtonDisabled,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-plus fa-lg\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"product-increase-quantity\",className:\"btn btn-success btn-lg d-block d-lg-none col-4 col-lg-1\",onClick:function onClick(){return _this2.increaseProductQuantity(id,'increase');},disabled:_this2.increaseButtonDisabled,children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-plus fa-lg\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"remove-product\",className:\"btn btn-sm btn-outline-danger col-2 offset-lg-6 col-lg-2 mt-3\",onClick:function onClick(){return _this2.removeProduct(id);},children:\"Remove\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:'70%'}})]},id);}):/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"shopping-cart-empty-message\",children:\"Seu carrinho est\\xE1 vazio\"}),/*#__PURE__*/_jsx(\"div\",{className:\"fs-5 mb-3\",children:cart.length>0&&\"Total: \".concat(currency.format(totalPrice))}),/*#__PURE__*/_jsx(Link,{to:\"/OnlineStore/checkout\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-success btn-lg\",\"data-testid\":\"checkout-products\",children:\"Finalize a compra\"})})]})})]});}}]);return ShoppingCart;}(Component);export default ShoppingCart;","map":{"version":3,"names":["React","Component","Link","Header","ShoppingCart","state","cart","JSON","parse","localStorage","getItem","componentDidUpdate","setItem","stringify","increaseProductQuantity","idProduct","operation","index","indexOf","find","id","orderQuantity","available_quantity","cartUpdate","setState","removeProduct","filter","item","totalPrice","length","map","price","reduce","a","b","currency","Intl","NumberFormat","style","thumbnail","title","replace","toFixed","increaseButtonDisabled","width","format"],"sources":["/home/lucas/Upando Projeto Online store/OnlineStore/src/pages/ShoppingCart.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\n\nclass ShoppingCart extends Component {\n  state = {\n    cart: (!JSON.parse(localStorage.getItem('cart'))\n      ? []\n      : JSON.parse(localStorage.getItem('cart'))),\n  }\n\n  componentDidUpdate = () => {\n    const { cart } = this.state;\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n\n  increaseProductQuantity = (idProduct, operation) => {\n    const { cart } = this.state;\n    const index = cart.indexOf(cart.find(({ id }) => id === idProduct));\n    if (operation === 'increase'\n    && cart[index].orderQuantity < cart[index].available_quantity) {\n      cart[index].orderQuantity += 1;\n      const cartUpdate = cart;\n      return this.setState({ cart: cartUpdate });\n    }\n    if (operation === 'decrease' && cart[index].orderQuantity > 1) {\n      cart[index].orderQuantity -= 1;\n      const cartUpdate = cart;\n      return this.setState({ cart: cartUpdate });\n    }\n  }\n\n  removeProduct = (id) => {\n    const { cart } = this.state;\n    const cartUpdate = cart.filter((item) => item.id !== id);\n    this.setState({ cart: cartUpdate });\n  }\n\n  render() {\n    const { cart } = this.state;\n    const totalPrice = cart.length > 0 && cart\n      .map(({ price, orderQuantity }) => price * orderQuantity).reduce((a, b) => a + b, 0);\n    const currency = new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'BRL',\n    });\n    return (\n      <>\n        <Header cart={ cart } categories={ false } />\n        <section className=\"container\">\n          <div className=\"row justify-content-center text-center mt-3\">\n            {cart.length > 0\n              ? cart.map(({ thumbnail, title, price, orderQuantity, id }) => (\n                <div\n                  key={ id }\n                  className=\"row justify-content-center align-items-center my-3\"\n                >\n                  <div className=\"col-8 col-lg-2 mb-3\">\n                    <img\n                      src={ thumbnail.replace(/I.jpg/g, 'W.jpg') }\n                      alt={ title }\n                      className=\"img-fluid mx-auto d-block\"\n                    />\n                  </div>\n                  <div className=\"col-12 col-lg-6 text-start mb-3\">\n                    <div\n                      data-testid=\"shopping-cart-product-name\"\n                      className=\"row fs-5\"\n                    >\n                      {title}\n                    </div>\n                    <div className=\"row my-3\">{`R$ ${price.toFixed(2)}`}</div>\n                    <div className=\"row align-items-center justify-content-center\">\n                      <button\n                        type=\"button\"\n                        className=\"btn\n                        btn-secondary btn-sm d-none d-lg-block col-4 col-lg-1\"\n                        onClick={ () => this.increaseProductQuantity(id, 'decrease') }\n                      >\n                        <i className=\"fa-solid fa-minus fa-lg\" />\n                      </button>\n                      <button\n                        type=\"button\"\n                        data-testid=\"product-decrease-quantity\"\n                        className=\"btn btn-secondary btn-lg d-lg-none col-4 col-lg-1\"\n                        onClick={ () => this.increaseProductQuantity(id, 'decrease') }\n                      >\n                        <i className=\"fa-solid fa-minus fa-lg\" />\n                      </button>\n                      <div\n                        data-testid=\"shopping-cart-product-quantity\"\n                        className=\"col-3 col-lg-1 text-center fs-4 mx-2\"\n                      >\n                        { orderQuantity }\n                      </div>\n                      <button\n                        type=\"button\"\n                        className=\"btn\n                        btn-success btn-sm d-none d-lg-block col-4 col-lg-1\"\n                        onClick={ () => this.increaseProductQuantity(id, 'increase') }\n                        disabled={ this.increaseButtonDisabled }\n                      >\n                        <i className=\"fa-solid fa-plus fa-lg\" />\n                      </button>\n                      <button\n                        type=\"button\"\n                        data-testid=\"product-increase-quantity\"\n                        className=\"btn\n                        btn-success\n                        btn-lg d-block d-lg-none col-4 col-lg-1\"\n                        onClick={ () => this.increaseProductQuantity(id, 'increase') }\n                        disabled={ this.increaseButtonDisabled }\n                      >\n                        <i className=\"fa-solid fa-plus fa-lg\" />\n                      </button>\n                      <button\n                        type=\"button\"\n                        data-testid=\"remove-product\"\n                        className=\"btn\n                        btn-sm\n                        btn-outline-danger\n                        col-2\n                        offset-lg-6\n                        col-lg-2\n                        mt-3\"\n                        onClick={ () => this.removeProduct(id) }\n                      >\n                        Remove\n                      </button>\n                    </div>\n                  </div>\n                  <hr style={ { width: '70%' } } />\n                </div>\n              ))\n              : (\n                <p\n                  data-testid=\"shopping-cart-empty-message\"\n                >\n                  Seu carrinho está vazio\n                </p>)}\n            <div\n              className=\"fs-5 mb-3\"\n            >\n              {cart.length > 0 && `Total: ${currency.format(totalPrice)}`}\n            </div>\n            <Link to=\"/OnlineStore/checkout\">\n              <button\n                type=\"button\"\n                className=\"btn btn-success btn-lg\"\n                data-testid=\"checkout-products\"\n              >\n                Finalize a compra\n              </button>\n            </Link>\n          </div>\n\n        </section>\n      </>\n\n    );\n  }\n}\n\nexport default ShoppingCart;\n"],"mappings":"ohBAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,OAAP,KAAmB,sBAAnB,C,gJAEMC,a,mVACJC,K,CAAQ,CACNC,IAAI,CAAG,CAACC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAD,CACH,EADG,CAEHH,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAHE,C,OAMRC,kB,CAAqB,UAAM,CACzB,GAAQL,KAAR,CAAiB,MAAKD,KAAtB,CAAQC,IAAR,CACAG,YAAY,CAACG,OAAb,CAAqB,MAArB,CAA6BL,IAAI,CAACM,SAAL,CAAeP,IAAf,CAA7B,EACD,C,OAEDQ,uB,CAA0B,SAACC,SAAD,CAAYC,SAAZ,CAA0B,CAClD,GAAQV,KAAR,CAAiB,MAAKD,KAAtB,CAAQC,IAAR,CACA,GAAMW,MAAK,CAAGX,IAAI,CAACY,OAAL,CAAaZ,IAAI,CAACa,IAAL,CAAU,kBAAGC,GAAH,MAAGA,EAAH,OAAYA,GAAE,GAAKL,SAAnB,EAAV,CAAb,CAAd,CACA,GAAIC,SAAS,GAAK,UAAd,EACDV,IAAI,CAACW,KAAD,CAAJ,CAAYI,aAAZ,CAA4Bf,IAAI,CAACW,KAAD,CAAJ,CAAYK,kBAD3C,CAC+D,CAC7DhB,IAAI,CAACW,KAAD,CAAJ,CAAYI,aAAZ,EAA6B,CAA7B,CACA,GAAME,WAAU,CAAGjB,IAAnB,CACA,MAAO,OAAKkB,QAAL,CAAc,CAAElB,IAAI,CAAEiB,UAAR,CAAd,CAAP,CACD,CACD,GAAIP,SAAS,GAAK,UAAd,EAA4BV,IAAI,CAACW,KAAD,CAAJ,CAAYI,aAAZ,CAA4B,CAA5D,CAA+D,CAC7Df,IAAI,CAACW,KAAD,CAAJ,CAAYI,aAAZ,EAA6B,CAA7B,CACA,GAAME,YAAU,CAAGjB,IAAnB,CACA,MAAO,OAAKkB,QAAL,CAAc,CAAElB,IAAI,CAAEiB,WAAR,CAAd,CAAP,CACD,CACF,C,OAEDE,a,CAAgB,SAACL,EAAD,CAAQ,CACtB,GAAQd,KAAR,CAAiB,MAAKD,KAAtB,CAAQC,IAAR,CACA,GAAMiB,WAAU,CAAGjB,IAAI,CAACoB,MAAL,CAAY,SAACC,IAAD,QAAUA,KAAI,CAACP,EAAL,GAAYA,EAAtB,EAAZ,CAAnB,CACA,MAAKI,QAAL,CAAc,CAAElB,IAAI,CAAEiB,UAAR,CAAd,EACD,C,8DAED,iBAAS,iBACP,GAAQjB,KAAR,CAAiB,KAAKD,KAAtB,CAAQC,IAAR,CACA,GAAMsB,WAAU,CAAGtB,IAAI,CAACuB,MAAL,CAAc,CAAd,EAAmBvB,IAAI,CACvCwB,GADmC,CAC/B,mBAAGC,MAAH,OAAGA,KAAH,CAAUV,aAAV,OAAUA,aAAV,OAA8BU,MAAK,CAAGV,aAAtC,EAD+B,EACsBW,MADtB,CAC6B,SAACC,CAAD,CAAIC,CAAJ,QAAUD,EAAC,CAAGC,CAAd,EAD7B,CAC8C,CAD9C,CAAtC,CAEA,GAAMC,SAAQ,CAAG,GAAIC,KAAI,CAACC,YAAT,CAAsB,OAAtB,CAA+B,CAC9CC,KAAK,CAAE,UADuC,CAE9CH,QAAQ,CAAE,KAFoC,CAA/B,CAAjB,CAIA,mBACE,wCACE,KAAC,MAAD,EAAQ,IAAI,CAAG7B,IAAf,CAAsB,UAAU,CAAG,KAAnC,EADF,cAEE,gBAAS,SAAS,CAAC,WAAnB,uBACE,aAAK,SAAS,CAAC,6CAAf,WACGA,IAAI,CAACuB,MAAL,CAAc,CAAd,CACGvB,IAAI,CAACwB,GAAL,CAAS,mBAAGS,UAAH,OAAGA,SAAH,CAAcC,KAAd,OAAcA,KAAd,CAAqBT,KAArB,OAAqBA,KAArB,CAA4BV,aAA5B,OAA4BA,aAA5B,CAA2CD,EAA3C,OAA2CA,EAA3C,oBACT,aAEE,SAAS,CAAC,oDAFZ,wBAIE,YAAK,SAAS,CAAC,qBAAf,uBACE,YACE,GAAG,CAAGmB,SAAS,CAACE,OAAV,CAAkB,QAAlB,CAA4B,OAA5B,CADR,CAEE,GAAG,CAAGD,KAFR,CAGE,SAAS,CAAC,2BAHZ,EADF,EAJF,cAWE,aAAK,SAAS,CAAC,iCAAf,wBACE,YACE,cAAY,4BADd,CAEE,SAAS,CAAC,UAFZ,UAIGA,KAJH,EADF,cAOE,YAAK,SAAS,CAAC,UAAf,uBAAiCT,KAAK,CAACW,OAAN,CAAc,CAAd,CAAjC,GAPF,cAQE,aAAK,SAAS,CAAC,+CAAf,wBACE,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,2DAFZ,CAIE,OAAO,CAAG,yBAAM,OAAI,CAAC5B,uBAAL,CAA6BM,EAA7B,CAAiC,UAAjC,CAAN,EAJZ,uBAME,UAAG,SAAS,CAAC,yBAAb,EANF,EADF,cASE,eACE,IAAI,CAAC,QADP,CAEE,cAAY,2BAFd,CAGE,SAAS,CAAC,mDAHZ,CAIE,OAAO,CAAG,yBAAM,OAAI,CAACN,uBAAL,CAA6BM,EAA7B,CAAiC,UAAjC,CAAN,EAJZ,uBAME,UAAG,SAAS,CAAC,yBAAb,EANF,EATF,cAiBE,YACE,cAAY,gCADd,CAEE,SAAS,CAAC,sCAFZ,UAIIC,aAJJ,EAjBF,cAuBE,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,yDAFZ,CAIE,OAAO,CAAG,yBAAM,OAAI,CAACP,uBAAL,CAA6BM,EAA7B,CAAiC,UAAjC,CAAN,EAJZ,CAKE,QAAQ,CAAG,MAAI,CAACuB,sBALlB,uBAOE,UAAG,SAAS,CAAC,wBAAb,EAPF,EAvBF,cAgCE,eACE,IAAI,CAAC,QADP,CAEE,cAAY,2BAFd,CAGE,SAAS,CAAC,yDAHZ,CAME,OAAO,CAAG,yBAAM,OAAI,CAAC7B,uBAAL,CAA6BM,EAA7B,CAAiC,UAAjC,CAAN,EANZ,CAOE,QAAQ,CAAG,MAAI,CAACuB,sBAPlB,uBASE,UAAG,SAAS,CAAC,wBAAb,EATF,EAhCF,cA2CE,eACE,IAAI,CAAC,QADP,CAEE,cAAY,gBAFd,CAGE,SAAS,CAAC,+DAHZ,CAUE,OAAO,CAAG,yBAAM,OAAI,CAAClB,aAAL,CAAmBL,EAAnB,CAAN,EAVZ,oBA3CF,GARF,GAXF,cA8EE,WAAI,KAAK,CAAG,CAAEwB,KAAK,CAAE,KAAT,CAAZ,EA9EF,GACQxB,EADR,CADS,EAAT,CADH,cAoFG,UACE,cAAY,6BADd,wCArFN,cA0FE,YACE,SAAS,CAAC,WADZ,UAGGd,IAAI,CAACuB,MAAL,CAAc,CAAd,mBAA6BM,QAAQ,CAACU,MAAT,CAAgBjB,UAAhB,CAA7B,CAHH,EA1FF,cA+FE,KAAC,IAAD,EAAM,EAAE,CAAC,uBAAT,uBACE,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,wBAFZ,CAGE,cAAY,mBAHd,+BADF,EA/FF,GADF,EAFF,GADF,CAkHD,C,0BA5JwB3B,S,EA+J3B,cAAeG,aAAf"},"metadata":{},"sourceType":"module"}