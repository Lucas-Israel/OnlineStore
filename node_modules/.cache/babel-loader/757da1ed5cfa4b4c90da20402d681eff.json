{"ast":null,"code":"var _jsxFileName = \"/home/lucas/projetos-T23/sd-023-b-project-frontend-online-store/src/pages/ShoppingCart.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ShoppingCart extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      cart: !JSON.parse(localStorage.getItem('cart')) ? [] : JSON.parse(localStorage.getItem('cart')),\n      update: false\n    };\n\n    this.update = () => {\n      this.setState(before => ({\n        update: !before.update\n      }));\n    };\n\n    this.componentDidUpdate = () => {\n      const {\n        cart\n      } = this.state;\n      localStorage.setItem('cart', JSON.stringify(cart));\n    };\n\n    this.increaseProductQuantity = (idProduct, operation) => {\n      const {\n        cart\n      } = this.state;\n      const index = cart.indexOf(cart.find(_ref => {\n        let {\n          id\n        } = _ref;\n        return id === idProduct;\n      }));\n\n      if (operation === 'increase' && cart[index].orderQuantity < cart[index].available_quantity) {\n        cart[index].orderQuantity += 1;\n        const cartUpdate = cart;\n        return this.setState({\n          cart: cartUpdate\n        });\n      }\n\n      if (operation === 'decrease' && cart[index].orderQuantity > 1) {\n        cart[index].orderQuantity -= 1;\n        const cartUpdate = cart;\n        return this.setState({\n          cart: cartUpdate\n        });\n      }\n    };\n\n    this.removeProduct = id => {\n      const {\n        cart\n      } = this.state;\n      const cartUpdate = cart.filter(item => item.id !== id);\n      this.setState({\n        cart: cartUpdate\n      });\n    };\n  }\n\n  render() {\n    const {\n      cart\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), cart.length > 0 ? cart.map(_ref2 => {\n        let {\n          title,\n          price,\n          orderQuantity,\n          id\n        } = _ref2;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            \"data-testid\": \"shopping-cart-product-name\",\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            \"data-testid\": \"product-decrease-quantity\",\n            onClick: () => this.increaseProductQuantity(id, 'decrease'),\n            children: \"-\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            \"data-testid\": \"shopping-cart-product-quantity\",\n            children: orderQuantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            \"data-testid\": \"product-increase-quantity\",\n            onClick: () => this.increaseProductQuantity(id, 'increase'),\n            disabled: this.increaseButtonDisabled,\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            \"data-testid\": \"remove-product\",\n            onClick: () => this.removeProduct(id),\n            children: \"Remove\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this)]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"p\", {\n        \"data-testid\": \"shopping-cart-empty-message\",\n        children: \"Seu carrinho est\\xE1 vazio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/checkout\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          \"data-testid\": \"checkout-products\",\n          children: \"Finalize a compra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ShoppingCart;","map":{"version":3,"names":["React","Component","Link","Header","ShoppingCart","state","cart","JSON","parse","localStorage","getItem","update","setState","before","componentDidUpdate","setItem","stringify","increaseProductQuantity","idProduct","operation","index","indexOf","find","id","orderQuantity","available_quantity","cartUpdate","removeProduct","filter","item","render","length","map","title","price","increaseButtonDisabled"],"sources":["/home/lucas/projetos-T23/sd-023-b-project-frontend-online-store/src/pages/ShoppingCart.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\n\nclass ShoppingCart extends Component {\n  state = {\n    cart: (!JSON.parse(localStorage.getItem('cart'))\n      ? []\n      : JSON.parse(localStorage.getItem('cart'))),\n    update: false,\n  }\n\n  update = () => {\n    this.setState((before) => ({\n      update: !before.update,\n    }));\n  }\n\n  componentDidUpdate = () => {\n    const { cart } = this.state;\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n\n  increaseProductQuantity = (idProduct, operation) => {\n    const { cart } = this.state;\n    const index = cart.indexOf(cart.find(({ id }) => id === idProduct));\n    if (operation === 'increase'\n    && cart[index].orderQuantity < cart[index].available_quantity) {\n      cart[index].orderQuantity += 1;\n      const cartUpdate = cart;\n      return this.setState({ cart: cartUpdate });\n    }\n    if (operation === 'decrease' && cart[index].orderQuantity > 1) {\n      cart[index].orderQuantity -= 1;\n      const cartUpdate = cart;\n      return this.setState({ cart: cartUpdate });\n    }\n  }\n\n  removeProduct = (id) => {\n    const { cart } = this.state;\n    const cartUpdate = cart.filter((item) => item.id !== id);\n    this.setState({ cart: cartUpdate });\n  }\n\n  render() {\n    const { cart } = this.state;\n    return (\n      <div>\n        <Header />\n        {cart.length > 0\n          ? cart.map(({ title, price, orderQuantity, id }) => (\n            <div key={ id }>\n              <p data-testid=\"shopping-cart-product-name\">{title}</p>\n              <p>{price}</p>\n              <button\n                type=\"button\"\n                data-testid=\"product-decrease-quantity\"\n                onClick={ () => this.increaseProductQuantity(id, 'decrease') }\n              >\n                -\n              </button>\n              <p data-testid=\"shopping-cart-product-quantity\">\n                { orderQuantity }\n              </p>\n              <button\n                type=\"button\"\n                data-testid=\"product-increase-quantity\"\n                onClick={ () => this.increaseProductQuantity(id, 'increase') }\n                disabled={ this.increaseButtonDisabled }\n              >\n                +\n              </button>\n              <button\n                type=\"button\"\n                data-testid=\"remove-product\"\n                onClick={ () => this.removeProduct(id) }\n              >\n                Remove\n              </button>\n            </div>\n          ))\n          : (\n            <p\n              data-testid=\"shopping-cart-empty-message\"\n            >\n              Seu carrinho est√° vazio\n            </p>)}\n        <Link to=\"/checkout\">\n          <button type=\"button\" data-testid=\"checkout-products\">Finalize a compra</button>\n        </Link>\n      </div>\n\n    );\n  }\n}\n\nexport default ShoppingCart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}