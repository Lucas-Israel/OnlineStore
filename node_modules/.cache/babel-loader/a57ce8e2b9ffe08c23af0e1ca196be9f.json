{"ast":null,"code":"import _defineProperty from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Categories from'../components/Categories';import InputSearch from'../components/InputSearch';import ProductCard from'../components/ProductCard';import Loading from'../components/Loading';import{getProductsFromCategoryAndQuery}from'../services/api';import Header from'../components/Header';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(){var _this;_classCallCheck(this,Home);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={search:'',products:[],isLoading:false,cart:!JSON.parse(localStorage.getItem('cart'))?[]:JSON.parse(localStorage.getItem('cart'))};_this.componentDidUpdate=function(){var cart=_this.state.cart;localStorage.setItem('cart',JSON.stringify(cart));};_this.handlerAddToCart=function(product){var cart=_this.state.cart;if(cart.some(function(_ref){var id=_ref.id;return id===product.id;})){var index=cart.indexOf(cart.find(function(_ref2){var id=_ref2.id;return id===product.id;}));cart[index].orderQuantity+=1;var cartUpdate=cart;_this.setState({cart:cartUpdate});return;}var orderQuantity='orderQuantity';product[orderQuantity]=1;_this.setState(function(before){return{cart:[].concat(_toConsumableArray(before.cart),[product])};});};_this.setLoading=function(bool){_this.setState({isLoading:bool});};_this.handleCategory=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(paramID){var response,results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setLoading(true);_this.setState({products:[],search:''});_context.next=4;return getProductsFromCategoryAndQuery(paramID);case 4:response=_context.sent;results=response.results;_this.setState({products:results});_this.setLoading(false);case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}();_this.handleOnChange=function(_ref4){var _ref4$target=_ref4.target,name=_ref4$target.name,value=_ref4$target.value;_this.setState(_defineProperty({},name,value));};_this.handleSearch=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var search,response,results;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setLoading(true);_this.setState({products:[]});search=_this.state.search;_context2.next=5;return getProductsFromCategoryAndQuery(undefined,search);case 5:response=_context2.sent;results=response.results;_this.setState({products:results});_this.setLoading(false);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _this;}_createClass(Home,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,products=_this$state.products,search=_this$state.search,isLoading=_this$state.isLoading,cart=_this$state.cart;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{cart:cart,categories:true}),/*#__PURE__*/_jsx(Categories,{handleCategory:this.handleCategory}),/*#__PURE__*/_jsx(\"section\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center text-center mt-3\",children:[/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"home-initial-message\",children:\"Digite algum termo de pesquisa ou escolha uma categoria.\"}),/*#__PURE__*/_jsx(InputSearch,{search:search,handleOnChange:this.handleOnChange,handleSearch:this.handleSearch,isLoading:isLoading})]})}),/*#__PURE__*/_jsx(\"section\",{className:\"container mt-5 bg-light\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center align-items-center g-3 p-2\",children:[isLoading&&/*#__PURE__*/_jsx(Loading,{}),products.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning text-center\",children:\"Nenhum produto foi encontrado\"}):products.map(function(element){return/*#__PURE__*/_jsx(ProductCard,{product:element,handlerAddToCart:_this2.handlerAddToCart},element.id);})]})})]});}}]);return Home;}(Component);export default Home;","map":{"version":3,"names":["React","Component","Categories","InputSearch","ProductCard","Loading","getProductsFromCategoryAndQuery","Header","Home","state","search","products","isLoading","cart","JSON","parse","localStorage","getItem","componentDidUpdate","setItem","stringify","handlerAddToCart","product","some","id","index","indexOf","find","orderQuantity","cartUpdate","setState","before","setLoading","bool","handleCategory","paramID","response","results","handleOnChange","target","name","value","handleSearch","undefined","length","map","element"],"sources":["/home/lucas/Upando Projeto Online store/OnlineStore/src/pages/Home.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport Categories from '../components/Categories';\nimport InputSearch from '../components/InputSearch';\nimport ProductCard from '../components/ProductCard';\nimport Loading from '../components/Loading';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\nimport Header from '../components/Header';\n\nclass Home extends Component {\n  state = {\n    search: '',\n    products: [],\n    isLoading: false,\n    cart: (!JSON.parse(localStorage.getItem('cart'))\n      ? []\n      : JSON.parse(localStorage.getItem('cart'))),\n  }\n\n  componentDidUpdate = () => {\n    const { cart } = this.state;\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n\n  handlerAddToCart = (product) => {\n    const { cart } = this.state;\n    if (cart.some(({ id }) => id === product.id)) {\n      const index = cart.indexOf(cart.find(({ id }) => id === product.id));\n      cart[index].orderQuantity += 1;\n      const cartUpdate = cart;\n      this.setState({ cart: cartUpdate });\n      return;\n    }\n    const orderQuantity = 'orderQuantity';\n    product[orderQuantity] = 1;\n    this.setState((before) => ({ cart: [...before.cart, product] }));\n  }\n\n  setLoading = (bool) => {\n    this.setState({ isLoading: bool });\n  }\n\n  handleCategory = async (paramID) => {\n    this.setLoading(true);\n    this.setState({ products: [], search: '' });\n    const response = await getProductsFromCategoryAndQuery(paramID);\n    const { results } = response;\n    this.setState({\n      products: results,\n    });\n    this.setLoading(false);\n  }\n\n  handleOnChange = ({ target: { name, value } }) => {\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  handleSearch = async () => {\n    this.setLoading(true);\n    this.setState({ products: [] });\n    const { search } = this.state;\n    const response = await getProductsFromCategoryAndQuery(undefined, search);\n    const { results } = response;\n    this.setState({\n      products: results,\n    });\n    this.setLoading(false);\n  };\n\n  render() {\n    const { products, search, isLoading, cart } = this.state;\n    return (\n      <>\n        <Header cart={ cart } categories />\n        <Categories handleCategory={ this.handleCategory } />\n        <section className=\"container\">\n          <div className=\"row justify-content-center text-center mt-3\">\n            <p\n              data-testid=\"home-initial-message\"\n            >\n              Digite algum termo de pesquisa ou escolha uma categoria.\n            </p>\n            <InputSearch\n              search={ search }\n              handleOnChange={ this.handleOnChange }\n              handleSearch={ this.handleSearch }\n              isLoading={ isLoading }\n            />\n          </div>\n        </section>\n        <section className=\"container mt-5 bg-light\">\n          <div\n            className=\"row justify-content-center align-items-center g-3 p-2\"\n          >\n            {isLoading && <Loading />}\n            {products.length === 0 ? (\n              <div className=\"alert alert-warning text-center\">\n                Nenhum produto foi encontrado\n              </div>\n            )\n              : products\n                .map((element) => (<ProductCard\n                  product={ element }\n                  key={ element.id }\n                  handlerAddToCart={ this.handlerAddToCart }\n                />))}\n          </div>\n        </section>\n      </>\n    );\n  }\n}\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}