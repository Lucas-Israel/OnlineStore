{"ast":null,"code":"import _defineProperty from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/lucas/Upando Projeto Online store/OnlineStore/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Header from'../components/Header';import CheckoutForm from'../components/CheckoutForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Checkout=/*#__PURE__*/function(_Component){_inherits(Checkout,_Component);var _super=_createSuper(Checkout);function Checkout(){var _this;_classCallCheck(this,Checkout);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={cart:!JSON.parse(localStorage.getItem('cart'))?[]:JSON.parse(localStorage.getItem('cart')),fullname:'',email:'',cpf:'',phone:'',cep:'',address:'',payment:false,showMessage:false};_this.validateForm=function(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_this.state,fullname=_ref.fullname,email=_ref.email,cpf=_ref.cpf,phone=_ref.phone,cep=_ref.cep,address=_ref.address;var payment=_this.state.payment;var arrayInputs=[fullname,email,cpf,phone,cep,address];return arrayInputs.some(function(input){return input.length===0||!payment;});};_this.handleOnChange=function(_ref2){var target=_ref2.target;var name=target.type==='radio'?'payment':target.name;var value=target.type==='radio'?target.checked:target.value;_this.setState(_defineProperty({},name,value));};_this.completePurchase=function(){if(_this.validateForm()){return _this.setState({showMessage:true});}localStorage.setItem('cart',JSON.stringify([]));var history=_this.props.history;return history.push('/');};return _this;}_createClass(Checkout,[{key:\"render\",value:function render(){var _this$state=this.state,cart=_this$state.cart,fullname=_this$state.fullname,email=_this$state.email,cpf=_this$state.cpf,phone=_this$state.phone,cep=_this$state.cep,address=_this$state.address,showMessage=_this$state.showMessage;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{cart:cart,categories:false}),/*#__PURE__*/_jsx(\"section\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center text-center mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-5 mx-5\",children:cart.map(function(_ref3){var title=_ref3.title,thumbnail=_ref3.thumbnail,price=_ref3.price,orderQuantity=_ref3.orderQuantity,id=_ref3.id;return/*#__PURE__*/_jsxs(\"div\",{className:\"row justify-content-center align-items-center my-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-8 col-lg-3 mb-3\",children:/*#__PURE__*/_jsx(\"img\",{src:thumbnail.replace(/I.jpg/g,'W.jpg'),alt:title,className:\"img-fluid mx-auto d-block\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-lg-9 text-start mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"shopping-cart-product-name\",className:\"row fs-6\",children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"row my-3\",children:[/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"shopping-cart-product-quantity\",children:orderQuantity}),\"R$ \".concat(price)]})]}),/*#__PURE__*/_jsx(\"hr\",{})]},id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-lg-6\",children:[/*#__PURE__*/_jsx(CheckoutForm,{fullname:fullname,email:email,cpf:cpf,phone:phone,cep:cep,address:address,handleOnChange:this.handleOnChange,completePurchase:this.completePurchase}),showMessage&&/*#__PURE__*/_jsx(\"p\",{\"data-testid\":\"error-msg\",className:\"alert alert-danger my-3\",children:\"Campos inv\\xE1lidos\"})]})]})})]});}}]);return Checkout;}(Component);export default Checkout;","map":{"version":3,"names":["React","Component","Header","CheckoutForm","Checkout","state","cart","JSON","parse","localStorage","getItem","fullname","email","cpf","phone","cep","address","payment","showMessage","validateForm","arrayInputs","some","input","length","handleOnChange","target","name","type","value","checked","setState","completePurchase","setItem","stringify","history","props","push","map","title","thumbnail","price","orderQuantity","id","replace"],"sources":["/home/lucas/Upando Projeto Online store/OnlineStore/src/pages/Checkout.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport CheckoutForm from '../components/CheckoutForm';\n\nclass Checkout extends Component {\n  state = {\n    cart: (!JSON.parse(localStorage.getItem('cart'))\n      ? []\n      : JSON.parse(localStorage.getItem('cart'))),\n    fullname: '',\n    email: '',\n    cpf: '',\n    phone: '',\n    cep: '',\n    address: '',\n    payment: false,\n    showMessage: false,\n  }\n\n  validateForm = ({ fullname, email, cpf, phone, cep, address } = this.state) => {\n    const { payment } = this.state;\n    const arrayInputs = [fullname, email, cpf, phone, cep, address];\n    return arrayInputs.some((input) => input.length === 0 || !payment);\n  }\n\n  handleOnChange = ({ target }) => {\n    const name = target.type === 'radio' ? 'payment' : target.name;\n    const value = target.type === 'radio' ? target.checked : target.value;\n    this.setState({ [name]: value });\n  };\n\n  completePurchase = () => {\n    if (this.validateForm()) {\n      return this.setState({ showMessage: true });\n    }\n    localStorage.setItem('cart', JSON.stringify([]));\n    const { history } = this.props;\n    return history.push('/');\n  }\n\n  render() {\n    const {\n      cart,\n      fullname,\n      email,\n      cpf,\n      phone,\n      cep,\n      address,\n      showMessage,\n    } = this.state;\n    return (\n      <>\n        <Header cart={ cart } categories={ false } />\n        <section className=\"container\">\n          <div className=\"row justify-content-center text-center mt-3\">\n            <div className=\"col-12 col-lg-5 mx-5\">\n              {cart.map(({ title, thumbnail, price, orderQuantity, id }) => (\n                <div\n                  key={ id }\n                  className=\"row justify-content-center align-items-center my-3\"\n                >\n                  <div className=\"col-8 col-lg-3 mb-3\">\n                    <img\n                      src={ thumbnail.replace(/I.jpg/g, 'W.jpg') }\n                      alt={ title }\n                      className=\"img-fluid mx-auto d-block\"\n                    />\n                  </div>\n                  <div className=\"col-12 col-lg-9 text-start mb-3\">\n                    <div\n                      data-testid=\"shopping-cart-product-name\"\n                      className=\"row fs-6\"\n                    >\n                      {title}\n                    </div>\n                    <div className=\"row my-3\">\n                      <p data-testid=\"shopping-cart-product-quantity\">\n                        { orderQuantity }\n                      </p>\n                      {`R$ ${price}`}\n                    </div>\n                  </div>\n                  <hr />\n                </div>\n              )) }\n            </div>\n            <div className=\"col-12 col-lg-6\">\n              <CheckoutForm\n                fullname={ fullname }\n                email={ email }\n                cpf={ cpf }\n                phone={ phone }\n                cep={ cep }\n                address={ address }\n                handleOnChange={ this.handleOnChange }\n                completePurchase={ this.completePurchase }\n              />\n              {showMessage\n              && (\n                <p\n                  data-testid=\"error-msg\"\n                  className=\"alert alert-danger my-3\"\n                >\n                  Campos inv√°lidos\n                </p>\n              )}\n            </div>\n          </div>\n        </section>\n      </>\n\n    );\n  }\n}\n\nCheckout.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default Checkout;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}